{"ts":1377026854592,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class LoginController < ApplicationController\n  def new_session\n    @user = User.new\n  end\n\n  def create_session\n    if env['omniauth.auth']\n      user = User.from_omniauth(env['omniauth.auth'])\n    else\n      user = User.find_by(email: params[:user][:email])\n      unless user && user.authenticate(params[:user][:password])\n        user = nil\n      end\n    end\n\n    if user\n      session[:user_id] = user.id\n      redirect_to user_path(user)\n    else\n      flash[:error] = \"Incorrect password.\"\n      redirect_to login_path\n    end\n  end\n\n  def logout\n    reset_session\n    redirect_to login_path\n  end\nend"]],"start1":0,"start2":0,"length1":0,"length2":607}]],"length":607}
