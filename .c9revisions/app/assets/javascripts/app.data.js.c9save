{"ts":1377026321586,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$(document).ready(function() {\r\n\r\n\t $('#docs pre code').each(function(){\r\n\t    var $this = $(this);\r\n\t    var t = $this.html();\r\n\t    $this.html(t.replace(/</g, '&lt;').replace(/>/g, '&gt;'));\r\n\t});\r\n\r\n\tfunction getRandomInt(min, max) {\r\n\t  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t};\r\n\r\n\t$(document).on('click', '.the-icons a', function(e){\r\n\t\te && e.preventDefault();\r\n\t});\r\n\r\n\t$(document).on('change', 'table thead [type=\"checkbox\"]', function(e){\r\n\t\te && e.preventDefault();\r\n\t\tvar $table = $(e.target).closest('table'), $checked = $(e.target).is(':checked');\r\n\t\t$('tbody [type=\"checkbox\"]',$table).attr('checked', $checked);\r\n\t});\r\n\r\n\t$(document).on('click', '[data-toggle^=\"progress\"]', function(e){\r\n\t\te && e.preventDefault();\r\n\r\n\t\t$el = $(e.target);\r\n\t\t$target = $($el.data('target'));\r\n\t\t$('.progress', $target).each(\r\n\t\t\tfunction(){\r\n\t\t\t\tvar $max = 50, $data, $ps = $('.progress-bar',this).last();\r\n\t\t\t\t($(this).hasClass('progress-mini') || $(this).hasClass('progress-small')) && ($max = 100);\r\n\t\t\t\t$data = Math.floor(Math.random()*$max)+'%';\r\n\t\t\t\t$ps.css('width', $data).attr('data-original-title', $data);\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\t\r\n\tfunction addNotification($notes){\r\n\t\tvar $el = $('#panel-notifications'), $n = $('.count-n:first', $el), $item = $('.list-group-item:first', $el).clone(), $v = parseInt($n.text());\r\n\t\t$('.count-n', $el).fadeOut().fadeIn().text($v+1);\r\n\t\t$item.attr('href', $notes.link);\r\n\t\t$item.find('.pull-left').html($notes.icon);\r\n\t\t$item.find('.media-body').html($notes.title);\r\n\t\t$item.hide().prependTo($el.find('.list-group')).slideDown().css('display','block');\r\n\t}\r\n\tvar $noteMail = {\r\n\t\ticon: '<i class=\"icon-envelope-alt icon-2x text-default\"></i>',\r\n\t\ttitle: 'Added the mail app, Check it out.<br><small class=\"text-muted\">2 July 13</small>',\r\n\t\tlink: 'mail.html'\r\n\t}\r\n\tvar $noteCalendar = {\r\n\t\ticon: '<i class=\"icon-calendar icon-2x text-default\"></i>',\r\n\t\ttitle: 'Added the calendar, Get it.<br><small class=\"text-muted\">10 July 13</small>',\r\n\t\tlink: 'calendar.html'\r\n\t}\r\n\tvar $noteTimeline = {\r\n\t\ticon: '<i class=\"icon-time icon-2x text-default\"></i>',\r\n\t\ttitle: 'Added the timeline, view it here.<br><small class=\"text-muted\">1 minute ago</small>',\r\n\t\tlink: 'timeline.html'\r\n\t}\r\n\twindow.setTimeout(function(){addNotification($noteMail)}, 2000);\r\n\twindow.setTimeout(function(){addNotification($noteCalendar)}, 3500);\r\n\twindow.setTimeout(function(){addNotification($noteTimeline)}, 5000);\r\n\r\n\t// fullcalendar\r\n\tvar date = new Date();\r\n\tvar d = date.getDate();\r\n\tvar m = date.getMonth();\r\n\tvar y = date.getFullYear();\r\n\tvar addDragEvent = function($this){\r\n\t\t// create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)\r\n\t\t// it doesn't need to have a start or end\r\n\t\tvar eventObject = {\r\n\t\t\ttitle: $.trim($this.text()), // use the element's text as the event title\r\n\t\t\tclassName: $this.attr('class').replace('label','')\r\n\t\t};\r\n\t\t\r\n\t\t// store the Event Object in the DOM element so we can get to it later\r\n\t\t$this.data('eventObject', eventObject);\r\n\t\t\r\n\t\t// make the event draggable using jQuery UI\r\n\t\t$this.draggable({\r\n\t\t\tzIndex: 999,\r\n\t\t\trevert: true,      // will cause the event to go back to its\r\n\t\t\trevertDuration: 0  //  original position after the drag\r\n\t\t});\r\n\t};\r\n\t$('.calendar').each(function() {\r\n\t\t$(this).fullCalendar({\r\n\t\t\theader: {\r\n\t\t\t\tleft: 'prev,next today',\r\n\t\t\t\tcenter: 'title',\r\n\t\t\t\tright: 'month,agendaWeek,agendaDay'\r\n\t\t\t},\r\n\t\t\teditable: true,\r\n\t\t\tdroppable: true, // this allows things to be dropped onto the calendar !!!\r\n\t\t\tdrop: function(date, allDay) { // this function is called when something is dropped\r\n\t\t\t\t\r\n\t\t\t\t\t// retrieve the dropped element's stored Event Object\r\n\t\t\t\t\tvar originalEventObject = $(this).data('eventObject');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// we need to copy it, so that multiple events don't have a reference to the same object\r\n\t\t\t\t\tvar copiedEventObject = $.extend({}, originalEventObject);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// assign it the date that was reported\r\n\t\t\t\t\tcopiedEventObject.start = date;\r\n\t\t\t\t\tcopiedEventObject.allDay = allDay;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// render the event on the calendar\r\n\t\t\t\t\t// the last `true` argument determines if the event \"sticks\" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)\r\n\t\t\t\t\t$('#calendar').fullCalendar('renderEvent', copiedEventObject, true);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// is the \"remove after drop\" checkbox checked?\r\n\t\t\t\t\tif ($('#drop-remove').is(':checked')) {\r\n\t\t\t\t\t\t// if so, remove the element from the \"Draggable Events\" list\r\n\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t,\r\n\t\t\tevents: [\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'All Day Event',\r\n\t\t\t\t// \tstart: new Date(y, m, 1)\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'Long Event',\r\n\t\t\t\t// \tstart: new Date(y, m, d-5),\r\n\t\t\t\t// \tend: new Date(y, m, d-2),\r\n\t\t\t\t// \tclassName:'bg-primary'\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \tid: 999,\r\n\t\t\t\t// \ttitle: 'Repeating Event',\r\n\t\t\t\t// \tstart: new Date(y, m, d-3, 16, 0),\r\n\t\t\t\t// \tallDay: false\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \tid: 999,\r\n\t\t\t\t// \ttitle: 'Repeating Event',\r\n\t\t\t\t// \tstart: new Date(y, m, d+4, 16, 0),\r\n\t\t\t\t// \tallDay: false\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'Meeting',\r\n\t\t\t\t// \tstart: new Date(y, m, d, 10, 30),\r\n\t\t\t\t// \tallDay: false\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'Lunch',\r\n\t\t\t\t// \tstart: new Date(y, m, d, 12, 0),\r\n\t\t\t\t// \tend: new Date(y, m, d, 14, 0),\r\n\t\t\t\t// \tallDay: false\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'Birthday Party',\r\n\t\t\t\t// \tstart: new Date(y, m, d+1, 19, 0),\r\n\t\t\t\t// \tend: new Date(y, m, d+1, 22, 30),\r\n\t\t\t\t// \tallDay: false\r\n\t\t\t\t// },\r\n\t\t\t\t// {\r\n\t\t\t\t// \ttitle: 'Click for Google',\r\n\t\t\t\t// \tstart: new Date(y, m, 28),\r\n\t\t\t\t// \tend: new Date(y, m, 29),\r\n\t\t\t\t// \turl: 'http://google.com/'\r\n\t\t\t\t// }\r\n\t\t\t]\r\n\t\t});\r\n\t});\r\n\t$('#myEvents').on('change', function(e, item){\r\n\t\taddDragEvent($(item));\r\n\t});\r\n\r\n\t$('#myEvents li').each(function() {\r\n\t\taddDragEvent($(this));\r\n\t});\r\n\r\n\t// fuelux datagrid\r\n\tvar DataGridDataSource = function (options) {\r\n\t\tthis._formatter = options.formatter;\r\n\t\tthis._columns = options.columns;\r\n\t\tthis._delay = options.delay;\r\n\t};\r\n\r\n\tDataGridDataSource.prototype = {\r\n\r\n\t\tcolumns: function () {\r\n\t\t\treturn this._columns;\r\n\t\t},\r\n\r\n\t\tdata: function (options, callback) {\r\n\t\t\tvar url = 'js/data/datagrid.json';\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tsetTimeout(function () {\r\n\r\n\t\t\t\tvar data = $.extend(true, [], self._data);\r\n\r\n\t\t\t\t$.ajax(url, {\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tasync: false,\r\n\t\t\t\t\ttype: 'GET'\r\n\t\t\t\t}).done(function (response) {\r\n\r\n\t\t\t\t\tdata = response.geonames;\r\n\t\t\t\t\t// SEARCHING\r\n\t\t\t\t\tif (options.search) {\r\n\t\t\t\t\t\tdata = _.filter(data, function (item) {\r\n\t\t\t\t\t\t\tvar match = false;\r\n\r\n\t\t\t\t\t\t\t_.each(item, function (prop) {\r\n\t\t\t\t\t\t\t\tif (_.isString(prop) || _.isFinite(prop)) {\r\n\t\t\t\t\t\t\t\t\tif (prop.toString().toLowerCase().indexOf(options.search.toLowerCase()) !== -1) match = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\treturn match;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// FILTERING\r\n\t\t\t\t\tif (options.filter) {\r\n\t\t\t\t\t\tdata = _.filter(data, function (item) {\r\n\t\t\t\t\t\t\tswitch(options.filter.value) {\r\n\t\t\t\t\t\t\t\tcase 'lt5m':\r\n\t\t\t\t\t\t\t\t\tif(item.population < 5000000) return true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'gte5m':\r\n\t\t\t\t\t\t\t\t\tif(item.population >= 5000000) return true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar count = data.length;\r\n\r\n\t\t\t\t\t// SORTING\r\n\t\t\t\t\tif (options.sortProperty) {\r\n\t\t\t\t\t\tdata = _.sortBy(data, options.sortProperty);\r\n\t\t\t\t\t\tif (options.sortDirection === 'desc') data.reverse();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// PAGING\r\n\t\t\t\t\tvar startIndex = options.pageIndex * options.pageSize;\r\n\t\t\t\t\tvar endIndex = startIndex + options.pageSize;\r\n\t\t\t\t\tvar end = (endIndex > count) ? count : endIndex;\r\n\t\t\t\t\tvar pages = Math.ceil(count / options.pageSize);\r\n\t\t\t\t\tvar page = options.pageIndex + 1;\r\n\t\t\t\t\tvar start = startIndex + 1;\r\n\r\n\t\t\t\t\tdata = data.slice(startIndex, endIndex);\r\n\r\n\t\t\t\t\tif (self._formatter) self._formatter(data);\r\n\r\n\t\t\t\t\tcallback({ data: data, start: start, end: end, count: count, pages: pages, page: page });\r\n\t\t\t\t}).fail(function(e){\r\n\r\n\t\t\t\t});\r\n\t\t\t}, self._delay);\r\n\t\t}\r\n\t};\r\n\r\n    $('#MyStretchGrid').each(function() {\r\n    \t$(this).datagrid({\r\n\t        dataSource: new DataGridDataSource({\r\n\t\t\t    // Column definitions for Datagrid\r\n\t\t\t    columns: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tproperty: 'toponymName',\r\n\t\t\t\t\t\tlabel: 'Name',\r\n\t\t\t\t\t\tsortable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tproperty: 'countrycode',\r\n\t\t\t\t\t\tlabel: 'Country',\r\n\t\t\t\t\t\tsortable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tproperty: 'population',\r\n\t\t\t\t\t\tlabel: 'Population',\r\n\t\t\t\t\t\tsortable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tproperty: 'fcodeName',\r\n\t\t\t\t\t\tlabel: 'Type',\r\n\t\t\t\t\t\tsortable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tproperty: 'geonameId',\r\n\t\t\t\t\t\tlabel: 'Edit',\r\n\t\t\t\t\t\tsortable: true\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\r\n\t\t\t    // Create IMG tag for each returned image\r\n\t\t\t    formatter: function (items) {\r\n\t\t\t      $.each(items, function (index, item) {\r\n\t\t\t        item.geonameId = '<a href=\"#edit?geonameid='+item.geonameId+'\"><i class=\"icon-pencil\"></i></a>';\r\n\t\t\t      });\r\n\t\t\t    }\r\n\t\t  })\r\n\t    });\r\n\t});\r\n\r\n\t// datatable\r\n\t$('[data-ride=\"datatables\"]').each(function() {\r\n\t\tvar oTable = $(this).dataTable( {\r\n\t\t\t\"bProcessing\": true,\r\n\t\t\t\"sAjaxSource\": \"js/data/datatable.json\",\r\n\t\t\t\"sDom\": \"<'row'<'col-sm-6'l><'col-sm-6'f>r>t<'row'<'col-sm-6'i><'col col-sm-6'p>>\",\r\n\t\t\t\"sPaginationType\": \"full_numbers\",\r\n\t\t\t\"aoColumns\": [\r\n\t\t\t\t{ \"mData\": \"engine\" },\r\n\t\t\t\t{ \"mData\": \"browser\" },\r\n\t\t\t\t{ \"mData\": \"platform\" },\r\n\t\t\t\t{ \"mData\": \"version\" },\r\n\t\t\t\t{ \"mData\": \"grade\" }\r\n\t\t\t]\r\n\t\t} );\r\n\t});\r\n\r\n\t// select2 \r\n\r\n   if ($.fn.select2) {\r\n        $(\"#select2-option\").select2();\r\n        $(\"#select2-tags\").select2({\r\n          tags:[\"red\", \"green\", \"blue\"],\r\n          tokenSeparators: [\",\", \" \"]}\r\n        );\r\n    }\r\n\r\n\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":9696}]],"length":9696}
{"contributors":[],"silentsave":false,"ts":1377026510875,"patch":[[{"diffs":[[0,"\t\t\t\t$('#"],[1,"full"],[0,"calendar"]],"start1":4231,"start2":4231,"length1":16,"length2":20}]],"length":9700,"saved":false}
