{"ts":1377025720835,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$(document).ready(function() {\n\n\tvar date = new Date();\n\tvar d = date.getDate();\n\tvar m = date.getMonth();\n\tvar y = date.getFullYear();\n\t\n\t$('#calendar').fullCalendar({\n        minTime: 1,\n        maxTime: 20,\n        ignoreTimezone: true,    \n// dayClick\n\t\t  dayClick: function(date, allDay, jsEvent, view) {\n\n        if (allDay) {\n            // Clicked on the entire day\n            $('#calendar')\n                .fullCalendar('changeView', 'agendaDay'/* or 'basicDay' */)\n                .fullCalendar('gotoDate',\n                    date.getFullYear(), date.getMonth(), date.getDate());\n        \n        }\n    },\n//\n\n//\n    editable: true,        \n\t\theader: {\n            left: 'prev,next today',\n            center: 'title',\n            right: 'month,agendaWeek,agendaDay'\n        },\n        defaultView: 'month',\n        height: 500,\n        slotMinutes: 15,\n\n        loading: function(bool){\n            if (bool) \n                $('#loading').show();\n            else \n                $('#loading').hide();\n        },\n        \n        // a future calendar might have many sources.        \n        eventSources: [{\n            url: '/events',\n            color: 'yellow',\n            textColor: 'black',\n            allDay: false,\n            ignoreTimezone: true   \n        }],\n        \n        timeFormat: 'h:mm t{ - h:mm t} ',\n        dragOpacity: \"0.5\",\n        \n        //http://arshaw.com/fullcalendar/docs/event_ui/eventDrop/\n        eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc){\n            updateEvent(event);\n        },\n\n        // http://arshaw.com/fullcalendar/docs/event_ui/eventResize/\n        eventResize: function(event, dayDelta, minuteDelta, revertFunc){\n            updateEvent(event);\n        },\n\n        // http://arshaw.com/fullcalendar/docs/mouse/eventClick/\n        eventClick: function(event, jsEvent, view){\n          // would like a lightbox here.\n        },\n\t});\n});\n\nfunction updateEvent(the_event) {\n    $.update(\n      \"/events/\" + the_event.id,\n      { event: { title: the_event.title,\n                 starts_at: \"\" + the_event.start,\n                 ends_at: \"\" + the_event.end,\n                 description: the_event.description\n               }\n      },\n      function (reponse) { alert('successfully updated task.'); }\n    );\n};"]],"start1":0,"start2":0,"length1":0,"length2":2302}]],"length":2302}
