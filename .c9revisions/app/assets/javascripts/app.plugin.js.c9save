{"ts":1377026362431,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"Date.now = Date.now || function() { return +new Date; };\r\n\r\n!function ($) {\r\n\r\n  $(function(){\r\n \t\r\n  \tvar isRgbaSupport = function(){\r\n\t\tvar value = 'rgba(1,1,1,0.5)',\r\n\t\tel = document.createElement('p'),\r\n\t\tresult = false;\r\n\t\ttry {\r\n\t\t\tel.style.color = value;\r\n\t\t\tresult = /^rgba/.test(el.style.color);\r\n\t\t} catch(e) {}\r\n\t\tel = null;\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar toRgba = function(str, alpha){\r\n\t\tvar patt = /^#([\\da-fA-F]{2})([\\da-fA-F]{2})([\\da-fA-F]{2})$/;\r\n\t\tvar matches = patt.exec(str);\r\n\t\treturn \"rgba(\"+parseInt(matches[1], 16)+\",\"+parseInt(matches[2], 16)+\",\"+parseInt(matches[3], 16)+\",\"+alpha+\")\";\r\n\t};\r\n\r\n\t// chart js\r\n\tvar generateSparkline = function($re){\r\n\t\t$(\".sparkline\").each(function(){\r\n\t\t\tvar $data = $(this).data();\r\n\t\t\tif($re && !$data.resize) return;\r\n\t\t\tif($data.type == 'bar'){\r\n\t\t\t\t!$data.barColor && ($data.barColor = \"#3fcf7f\");\r\n\t\t\t\t!$data.barSpacing && ($data.barSpacing = 2);\r\n\t\t\t\t$(this).next('.axis').find('li').css('width',$data.barWidth+'px').css('margin-right',$data.barSpacing+'px');\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t($data.type == 'pie') && $data.sliceColors && ($data.sliceColors = eval($data.sliceColors));\r\n\t\t\t\r\n\t\t\t// $data.fillColor && ($data.fillColor.indexOf(\"#\") !== -1) && isRgbaSupport() && ($data.fillColor = toRgba($data.fillColor, 0.5));\r\n\t\t\t$data.spotColor = $data.minSpotColor = $data.maxSpotColor = $data.highlightSpotColor = $data.lineColor;\r\n\t\t\t$(this).sparkline( $data.data || \"html\", $data);\r\n\r\n\t\t\tif($(this).data(\"compositeData\")){\r\n\t\t\t\tvar $cdata = {};\r\n\t\t\t\t$cdata.composite = true;\r\n\t\t\t\t$cdata.spotRadius = $data.spotRadius;\r\n\t\t\t\t$cdata.lineColor = $data.compositeLineColor || '#a3e2fe';\r\n\t\t\t\t$cdata.fillColor = $data.compositeFillColor || '#e3f6ff';\r\n\t\t\t\t$cdata.highlightLineColor =  $data.highlightLineColor;\r\n\t\t\t\t$cdata.spotColor = $cdata.minSpotColor = $cdata.maxSpotColor = $cdata.highlightSpotColor = $cdata.lineColor;\r\n\t\t\t\tisRgbaSupport() && ($cdata.fillColor = toRgba($cdata.fillColor, 0.5));\r\n\t\t\t\t$(this).sparkline($(this).data(\"compositeData\"),$cdata);\r\n\t\t\t};\r\n\t\t\tif($data.type == 'line'){\r\n\t\t\t\t$(this).next('.axis').addClass('axis-full');\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\r\n\tvar sparkResize;\r\n\t$(window).resize(function(e) {\r\n\t\tclearTimeout(sparkResize);\r\n\t\tsparkResize = setTimeout(function(){generateSparkline(true)}, 500);\r\n\t});\r\n\tgenerateSparkline(false);\r\n\r\n\t// easypie\r\n\tvar updatePie = function($that) {\r\n\t\tvar $this = $that, \r\n\t\t$text = $('span', $this), \r\n\t\t$oldValue = $text.html(), \r\n\t\t$newValue = Math.round(100*Math.random());\r\n\t    \r\n\t    $this.data('easyPieChart').update($newValue);\r\n\r\n\t    $({v: $oldValue}).animate({v: $newValue}, {\r\n\t\t\tduration: 1000,\r\n\t\t\teasing:'swing',\r\n\t\t\tstep: function() {\r\n\t\t\t\t$text.text(Math.ceil(this.v));\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n    $('.easypiechart').each(function(){\r\n    \tvar $barColor = $(this).data(\"barColor\") || function($percent) {\r\n            $percent /= 100;\r\n            return \"rgb(\" + Math.round(255 * (1-$percent)) + \", \" + Math.round(255 * $percent) + \", 125)\";\r\n        },\r\n\t\t$trackColor = $(this).data(\"trackColor\") || \"#c8d2db\",\r\n\t\t$scaleColor = $(this).data(\"scaleColor\"),\r\n\t\t$lineWidth = $(this).data(\"lineWidth\") || 12,\r\n\t\t$size = $(this).data(\"size\") || 130,\r\n\t\t$animate = $(this).data(\"animate\") || 1000;\r\n\r\n\t\t$(this).easyPieChart({\r\n\t        barColor: $barColor,\r\n\t        trackColor: $trackColor,\r\n\t        scaleColor: $scaleColor,\r\n\t        lineCap: 'butt',\r\n\t        lineWidth: $lineWidth,\r\n\t        size: $size,\r\n\t        animate: $animate,\r\n\t        onStop: function(){\r\n\t        \tvar $this = this.$el;\r\n\t        \t$this.data(\"loop\") && setTimeout(function(){ $this.data(\"loop\") && updatePie($this) }, 2000);        \t\r\n\t        }\r\n\t    });\r\n\t});\r\n\r\n    $(document).on('click', '[data-toggle^=\"class:pie\"]', function (e) {\r\n    \te && e.preventDefault();\r\n\t    var $btn = $(e.target), $loop = $('[data-loop]').data('loop'), $target;\r\n\t    !$btn.data('toggle') && ($btn = $btn.closest('[data-toggle^=\"class\"]'));\r\n\t    $target = $btn.data('target');\r\n\t    !$target && ($target = $btn.closest('[data-loop]'));\r\n\t\t$target.data('loop', !$loop);\r\n\t\t!$loop && updatePie($('[data-loop]'));\r\n\t});\r\n    \r\n    // combodate\r\n\t$(\".combodate\").each(function(){ \r\n\t\t$(this).combodate();\r\n\t\t$(this).next('.combodate').find('select').addClass('form-control');\r\n\t});\r\n\t// datepicker\r\n\t$(\".datepicker\").each(function(){ $(this).datepicker();});\r\n\t// dropfile\r\n\t$('.dropfile').each(function(){\r\n\t\tvar $dropbox = $(this);\r\n\t\tif (typeof window.FileReader === 'undefined') {\r\n\t\t  $('small',this).html('File API & FileReader API not supported').addClass('text-danger');\r\n\t\t  return;\r\n\t\t}\r\n\r\n\t\tthis.ondragover = function () {$dropbox.addClass('hover'); return false; };\r\n\t\tthis.ondragend = function () {$dropbox.removeClass('hover'); return false; };\r\n\t\tthis.ondrop = function (e) {\r\n\t\t  e.preventDefault();\r\n\t\t  $dropbox.removeClass('hover').html('');\r\n\t\t  var file = e.dataTransfer.files[0],\r\n\t\t      reader = new FileReader();\r\n\t\t  reader.onload = function (event) {\r\n\t\t  \t$dropbox.append($('<img>').attr('src', event.target.result));\r\n\t\t  };\r\n\t\t  reader.readAsDataURL(file);\r\n\t\t  return false;\r\n\t\t};\r\n\t});\r\n\r\n\t// fuelux pillbox\r\n\tvar addPill = function($input){\r\n\t\tvar $text = $input.val(), $pills = $input.closest('.pillbox'), $repeat = false, $repeatPill;\r\n\t\tif($text == \"\") return;\r\n\t\t$(\"li\", $pills).text(function(i,v){\r\n\t        if(v == $text){\r\n\t        \t$repeatPill = $(this);\r\n\t        \t$repeat = true;\r\n\t        }\r\n\t    });\r\n\t    if($repeat) {\r\n\t    \t$repeatPill.fadeOut().fadeIn();\r\n\t    \treturn;\r\n\t    };\r\n\t    $item = $('<li class=\"label bg-default\">'+$text+'</li> ');\r\n\t\t$item.insertBefore($input);\r\n\t\t$input.val('');\r\n\t\t$pills.trigger('change', $item);\r\n\t};\r\n\r\n\t$('.pillbox input').on('blur', function() {\r\n\t\taddPill($(this));\r\n\t});\r\n\r\n\t$('.pillbox input').on('keypress', function(e) {\r\n\t    if(e.which == 13) {\r\n\t        e.preventDefault();\r\n\t        addPill($(this));\r\n\t    }\r\n\t});\r\n\r\n\t// slider\r\n\t$('.slider').each(function(){\r\n\t\t$(this).slider();\r\n\t});\r\n\r\n\t// wizard\r\n\t$(document).on('click', '[data-wizard]', function (e) {\r\n\t\tvar $this   = $(this), href;\r\n\t    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, ''));\r\n\t    var option = $this.data('wizard');\r\n\t    var item = $target.wizard('selectedItem');\r\n\t    var $step = $(this).closest('.step-content').find('.step-pane:eq(' + (item.step-1) + ')');\r\n\t    if( $step.find('input, select, textarea').data('required') && !$step.find('input, select, textarea').parsley( 'validate' ) ){\r\n\t    \treturn false;\r\n\t    }else{\r\n\t    \t$target.wizard(option);\r\n\t    \tvar activeStep = (option==\"next\") ? (item.step+1) : (item.step-1);\r\n\t    \tvar prev = ($(this).hasClass('btn-prev') && $(this)) || $(this).prev();\r\n\t    \tprev.attr('disabled', (activeStep == 1) ? true : false);\r\n\t    }\r\n\t});\r\n\r\n  });\r\n}(window.jQuery);"]],"start1":0,"start2":0,"length1":0,"length2":6832}]],"length":6832}
